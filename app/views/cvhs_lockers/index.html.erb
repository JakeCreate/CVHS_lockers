<% if flash[:notice] -%>
  <div class="alert alert-success"><%= flash[:notice] %></div>
<% end %>

<div class="index">
  <table>

    <div class="index-line">
        <!-- Search Box -->
        <%= form_tag cvhs_lockers_path, method: 'get' do %>
          <p>
            <%= text_field_tag  :search, params[:search], :placeholder => "Search By ID..", id:"search-box" %>
            <%= submit_tag  "Search", id: "search-submit", class: "master-button"%>
          </p>
        <% end %>

        <!-- Modal -->
        <div id="myModal" class="modal fade black" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Settings</h4>
              </div>

              <!-- DOWNLOAD XLSX SHEET -->
             <a href='/download' download id="download-button" class="master-button">Generate Excel File</a>

              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>

          </div>
        </div>


      </div>

    </div>
        
    <thead>
      <tr>
        <th>Student 1</th>
        <th>Last Name</th>
        <th>ID 1</th>
        <th>Student 2</th>
        <th>Last Name</th>
        <th>ID 2</th>
        <th>Building</th>
        <th>Locker Number</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <!-- NO SEARCH INPUTED -->
    <% if params[:search] == nil %>
      <%= will_paginate %>

      <br>

      <tbody>
          <% @cvhs_lockers.each do |cvhs_locker| %> 
          <tr>
            <td><%= cvhs_locker.name1 %></td>
            <td><%= cvhs_locker.lastName1 %></td>
            <td><%= cvhs_locker.studentID1 %></td>
            <td><%= cvhs_locker.name2 %></td>
            <td><%= cvhs_locker.lastName2 %></td>
            <td><%= cvhs_locker.studentID2 %></td>
            <td><%= cvhs_locker.buildingNum %></td>
            <td><%= cvhs_locker.lockerNum %></td>
            <td><%= link_to 'Edit', edit_cvhs_locker_path(cvhs_locker) %></td>
            <td>-</td>
            <td><%= link_to 'Delete', cvhs_locker, :method => :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>
      </tbody>
      </table>
      <br>

      <%= will_paginate %>
      <br>

    <!-- SEARCH INPUTED -->
    <% else %>

      <br>

      <!-- INVALID -->
      <% if @cvhs_lockers == nil %>
          <tbody>
              <tr>
                <td><h4 style="color: red">STUDENT NOT FOUND</h1></td>
              </tr>
          </tbody>
          </table>
          <br>

      <!-- VALID -->
      <% else %>
          <br>
          <tbody>
              <tr>
                <td><%= @cvhs_locker.name1 %></td>
                <td><%= @cvhs_locker.lastName1 %></td>
                <td><%= @cvhs_locker.studentID1 %></td>
                <td><%= @cvhs_locker.name2 %></td>
                <td><%= @cvhs_locker.lastName2 %></td>
                <td><%= @cvhs_locker.studentID2 %></td>
                <td><%= @cvhs_locker.lockerNum %></td>
                <td><%= link_to 'Edit', edit_cvhs_locker_path(@cvhs_lockers) %></td>
                <td>-</td>
                <td><%= link_to 'Delete', @cvhs_lockers, :method => :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
          </tbody>
          </table>
          <br>
      <% end %>

    <% end %>

    <button class="master-button back"><%= link_to 'Back', 'javascript:history.go(-1);', {:style=>'color:white;'} %> </button>

</div>
